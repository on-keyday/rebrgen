#license
# Code generated by ebmcodegen at https://github.com/on-keyday/rebrgen
project(ebm2z3)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/tool)
add_executable(ebm2z3
    "main.cpp"
)
target_precompile_headers(ebm2z3 PRIVATE
    <format>
    <expected>
    <string>
    <vector>
    <variant>
    <optional>
    <ebm/extended_binary_module.hpp>
    <ebmcodegen/stub/entry.hpp>
    <ebmcodegen/stub/util.hpp>
    <ebmgen/common.hpp>
    <ebmgen/convert/helper.hpp>
    <ebmgen/mapping.hpp>
    <code/code_writer.h>
    <code/loc_writer.h>
    <ebmcodegen/stub/writer_manager.hpp>
    <concepts>
    <strutil/append.h>
)
if(UNIX)
set_target_properties(ebm2z3 PROPERTIES INSTALL_RPATH "${CMAKE_SOURCE_DIR}/tool")
endif()
target_link_libraries(ebm2z3 ebm futils ebm_mapping)
install(TARGETS ebm2z3 DESTINATION tool)
if ("$ENV{BUILD_MODE}" STREQUAL "web")
    target_compile_options(ebm2z3 PUBLIC "-gsource-map")
    target_link_options(ebm2z3 PUBLIC "-gsource-map" "--source-map-base" "http://localhost:8000/")
    install(FILES "${CMAKE_BINARY_DIR}/tool/ebm2z3.wasm" DESTINATION tool)
    install(FILES "${CMAKE_BINARY_DIR}/tool/ebm2z3.wasm.map" DESTINATION tool)
endif()
