/*DO NOT EDIT BELOW SECTION MANUALLY*/
/*license*/
// Template generated by ebmcodegen at https://github.com/on-keyday/rebrgen
/*
  Name: pre_visitor_class
  Available Variables:
    ctx: Context_pre_visitor
      visitor: MergedVisitor&
        program_name: static constexpr const char*
        flags: Flags&
        output: Output&
        wm: ebmcodegen::WriterManager<CodeWriter>
        module_: ebmgen::MappingTable
      ebm: ebm::ExtendedBinaryModule&
*/
/*DO NOT EDIT ABOVE SECTION MANUALLY*/

#include "../codegen.hpp"

inline std::string to_camel_case(const std::string& s, bool upper_first) {
    std::string result;
    bool upper_next = upper_first;
    for (char ch : s) {
        if (ch == '_' || ch == '-') {
            upper_next = true;
        }
        else {
            if (upper_next) {
                result += std::toupper(ch);
                upper_next = false;
            }
            else {
                result += ch;
            }
        }
    }
    return result;
}

DEFINE_VISITOR(pre_visitor) {
    using namespace CODEGEN_NAMESPACE;
    /*here to write the hook*/
    ctx.module().set_identifier_modifier(
        [](ebm::StatementRef ref, std::string& name) {
            if (name.contains(".")) {
                return;
            }
            name = to_camel_case(name, true);
        });
    return pass;
}
