/*DO NOT EDIT BELOW SECTION MANUALLY*/
/*license*/
// Template generated by ebmcodegen at https://github.com/on-keyday/rebrgen
/*
  Name: Statement_INIT_CHECK
  Available variables:
    *this: Visitor
    module_: MappingTable
    item_id: StatementRef
    kind: StatementKind
    init_check: InitCheck
      stream_type: StreamType
      target_field: StatementRef
      expect_type: TypeRef
*/
/*DO NOT EDIT ABOVE SECTION MANUALLY*/

/*here to write the hook*/

MAYBE(init_check_field, as_IDENTIFIER(*this, init_check.target_field));
MAYBE(init_check_type, visit_Type(*this, init_check.expect_type));
CodeWriter w;
if (init_check.stream_type == ebm::StreamType::OUTPUT) {
    w.writeln("assert isinstance(", init_check_field.to_string(), ", ", init_check_type.to_string(), ")");
}
else {
    w.writeln("if not isinstance(", init_check_field.to_string(), ", ", init_check_type.to_string(), "):");
    {
        auto indent = w.indent_scope();
        MAYBE(default_expr, as_DEFAULT_VALUE(*this, init_check.expect_type));
        w.writeln(init_check_field.to_string(), " = ", default_expr.to_string());
    }
}

return w.out();