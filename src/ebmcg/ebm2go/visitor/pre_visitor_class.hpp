/*DO NOT EDIT BELOW SECTION MANUALLY*/
/*license*/
// Template generated by ebmcodegen at https://github.com/on-keyday/rebrgen
/*
  Name: pre_visitor_class
  Available Variables:
    ctx: Context_pre_visitor
      visitor: MergedVisitor&
        program_name: static constexpr const char*
        module_: ebmgen::MappingTable
        flags: Flags&
        output: Output&
        wm: ebmcodegen::WriterManager<CodeWriter>
      ebm: ebm::ExtendedBinaryModule&
*/
/*DO NOT EDIT ABOVE SECTION MANUALLY*/

#include "../codegen.hpp"

inline std::string to_camel_case(const std::string& s) {
    std::string result;
    bool upper_next = false;
    for (char ch : s) {
        if (ch == '_' || ch == '-') {
            upper_next = true;
        }
        else {
            if (upper_next) {
                result += std::toupper(ch);
                upper_next = false;
            }
            else {
                result += ch;
            }
        }
    }
    return result;
}

DEFINE_VISITOR(pre_visitor) {
    using namespace CODEGEN_NAMESPACE;
    /*here to write the hook*/
    for (auto& ident : ctx.ebm.identifiers) {
        if (ident.body.data.contains('.')) {  // metadata or special identifier
            continue;
        }
        ident.body.data = to_camel_case(ident.body.data);
        ident.body.data[0] = std::toupper(ident.body.data[0]);
    }
    return pass;
}
