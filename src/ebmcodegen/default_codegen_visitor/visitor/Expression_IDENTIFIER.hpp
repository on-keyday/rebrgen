/*DO NOT EDIT BELOW SECTION MANUALLY*/
/*license*/
// Template generated by ebmcodegen at https://github.com/on-keyday/rebrgen
/*
  Name: Expression_IDENTIFIER
  Available variables:
    visitor: Visitor
    module_: MappingTable
    item_id: ExpressionRef
    generator_default_logic: std::function<expected<Result>()>
    default_logic: std::function<expected<Result>()>
    type: TypeRef
    kind: ExpressionKind
    id: StatementRef
*/
/*DO NOT EDIT ABOVE SECTION MANUALLY*/

MAYBE(layers, get_identifier_layer(*this, id));
bool as_type = false;
if (!layers.empty() &&
    (layers.back().first == ebm::StatementKind::STRUCT_DECL ||
     layers.back().first == ebm::StatementKind::ENUM_DECL)) {
    as_type = true;
}

std::string result;
for (auto& layer : layers) {
    if (!result.empty()) {
        result += ".";
    }
    if (layer.first == ebm::StatementKind::STRUCT_DECL) {
        if (as_type) {
            result += layer.second;
        }
        else {
            result += visitor.self_value;
        }
    }
    else {
        result += layer.second;
    }
}

auto ident = module_.get_associated_identifier(id);

return ident;